<!DOCTYPE html>
<html>

<head>
    <title>API Handler</title>
    <script>
        function getAPI() {
            fetch('/api/pulpits')
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    document.getElementById('result').textContent = JSON.stringify(data, null, 2);
                })
                .catch((error) => {
                    console.error('Error:', error);
                });
        }

        function postAPI() {
            const PULPIT = document.getElementById('postPULPIT').value;
            const PULPIT_NAME = document.getElementById('postPULPIT_NAME').value;
            const FACULTY = document.getElementById('postFACULTY').value;

            const body = { PULPIT, PULPIT_NAME, FACULTY };

            fetch('/api/pulpits', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',

                },
                body: JSON.stringify(body),
            })
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    document.getElementById('result').textContent = JSON.stringify({ "DML": "INSERT", ...body, ...data }, null, 2)
                })
                .catch((error) => {
                    console.error('Error:', error);
                });
        }

        function putAPI() {
            const PULPIT = document.getElementById('putPULPIT').value;
            const PULPIT_NAME = document.getElementById('putPULPIT_NAME').value;
            const FACULTY = document.getElementById('putFACULTY').value;

            const body = { PULPIT, PULPIT_NAME, FACULTY };

            fetch('/api/pulpits', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(body),
            })
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    document.getElementById('result').textContent = JSON.stringify({ "DML": "UPDATE", ...body, ...data }, null, 2);
                })
                .catch((error) => {
                    console.error('Error:', error);
                });
        }

        function deleteAPI() {
            const id = document.getElementById('deleteID').value;

            fetch(`/api/pulpits/${id}`, {
                method: 'DELETE',
            })
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    document.getElementById('result').textContent = JSON.stringify({ "DML": "DELETE", ...{ "id": id }, ...data }, null, 2);
                })
                .catch((error) => {
                    console.error('Error:', error);
                });
        }
    </script>
</head>

<body>
    <section>
        <button onclick="getAPI()"> GET </button>
    </section>

    <section>
        <button onclick="postAPI()"> POST </button>
        <input id="postPULPIT" placeholder="Enter PULPIT">
        <input id="postPULPIT_NAME" placeholder="Enter PULPIT_NAME">
        <input id="postFACULTY" placeholder="Enter FACULTY">
    </section>


    <section>
        <button onclick="putAPI()"> PUT </button>
        <input id="putPULPIT" placeholder="Enter PULPIT">
        <input id="putPULPIT_NAME" placeholder="Enter PULPIT_NAME">
        <input id="putFACULTY" placeholder="Enter FACULTY">
    </section>


    <section>
        <button onclick="deleteAPI()"> DELETE </button>
        <input id="deleteID" placeholder="Enter PULPIT">
    </section>



    <h3> PULPIT output: </h3>
    <pre id="result"></pre>

</body>

</html>